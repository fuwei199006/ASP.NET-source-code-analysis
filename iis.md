### 服务器的监听(IIS6.0+版本)     

1. 当请求到达服务器时，请求最终会到达TCPIP.SYS驱动程序，TCPIP.SYS将请求转发给HTTP.SYS网络驱动程序的请求队列中（可以理解为专门处理http请求的进程），当然在处理请求的过程中，HTTP.SYS进程会维护一个配置表用缓存请求的url和和应用程序池对应的关系。   

2. 当一个http请求被捕获到，HTTP.SYS会读取配置表，如果对应的应用程序没有启动，则HTTP.SYS会启动IIS相对应的应用程序。具体运行机制可以理解成为：   
 
 ![Http.SYS机制](/assets/HttpSys机制.png)


### Http.Sys    
HTTP.SYS是TCP之上的一个网络驱动程序，因此，HTTP.SYS不再属于IIS(这里说的IIS都是IIS6.0+版本，下文如果不特殊指明，默认为IIS6.0+版本)，它已经从IIS中独立了出来。 Http.Sys独立有以下几个优点：     

- 可靠性： HTTP.SYS运行在内核模式下，作为操作系统的驱动程序运行。因此，HTTP.SYS不会受到用户代码的影响，它始终处于稳定运行状态，对用户的http请求进行监听，并及时作出反应。   

- 高性能： 从用户发送http请求到系统返回响应结果的这一过程都是HTTP.SYS在内核模式下完成的。不需要在内核模式和用户模式下进行切换，这样就极大地节省了系统资源，提高了请求的响应速度。 
 

### IIS处理    

